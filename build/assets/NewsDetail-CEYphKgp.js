import{c as M,j as e,S as o,B as d,C as x,e as h,a as P,b as B}from"./index-Bg84Z9Mq.js";import{b as Q,u as W,L as $}from"./router-vendor-BLkE0Fw5.js";import{r as i}from"./react-vendor-CoRTCUxX.js";import{B as X}from"./badge-tBdtZtNR.js";import{H as b,F as w}from"./Footer-CVy8QyIC.js";import{A as z,S as p}from"./separator-BdqQHWvD.js";import{A as Z,a as _,b as ee}from"./avatar-UaX-2Fdw.js";import{T as se}from"./tag-C29yzCad.js";import{E as H}from"./eye-Df-DD7Pk.js";import{C as ae}from"./calendar-Dq3vT5nZ.js";import{C as te}from"./clock-D9WJkygB.js";import{H as R}from"./heart-DIdF3TRO.js";import{C as re}from"./chevron-right-CpzvCFBx.js";import{C as ie}from"./chevron-up-BF3bv7bF.js";import"./user-DIh3-zlu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=M("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=M("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),F={Regulamento:"bg-destructive/10 text-destructive border-destructive/30",Parceria:"bg-accent/10 text-accent border-accent/30",Resultados:"bg-secondary/10 text-secondary border-secondary/30",Campeonato:"bg-primary/10 text-primary border-primary/30",Noticias:"bg-blue-100 text-blue-800 border-blue-200"},be=()=>{var E;const{id:c}=Q(),y=W(),[a,f]=i.useState(null),[u,q]=i.useState([]),[O,k]=i.useState(!0),[g,C]=i.useState(!1),[S,N]=i.useState(0),[A,L]=i.useState(0),[v,j]=i.useState(0),[I,U]=i.useState(0);i.useEffect(()=>{let s=!0;return fetch("/api/news").then(t=>t.json()).then(t=>{if(!s)return;q(t);const r=t.find(l=>String(l.id)===String(c));r&&fetch(`/api/news/${r.id}/view`,{method:"POST"}).then(l=>l.json()).then(l=>{const n=l&&l.item?l.item:r;f(n),L(n.views||0),N(n.likes||0),j(n.shares||0),fetch("/api/session").then(m=>m.json()).then(m=>{m&&m.user&&n.likedBy&&C(n.likedBy.includes(m.user.username))}).catch(()=>{})}).catch(l=>{console.error("view increment failed",l),f(r),L(r.views||0),N(r.likes||0),j(r.shares||0)}),k(!1)}).catch(t=>{console.error(t),k(!1)}),()=>{s=!1}},[c]),i.useEffect(()=>{const s=()=>{const t=document.documentElement.scrollHeight-window.innerHeight,r=t>0?window.scrollY/t*100:0;U(r)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const T=i.useMemo(()=>a?u.filter(s=>String(s.id)!==String(c)&&s.category===a.category).slice(0,3):[],[u,a,c]),Y=i.useMemo(()=>u.filter(s=>String(s.id)!==String(c)).sort((s,t)=>(t.views||0)-(s.views||0)).slice(0,5),[u,c]),G=async()=>{try{const s=await fetch(`/api/news/${c}/like`,{method:"POST",credentials:"include"});if(s.status===401)return alert("VocÃª precisa estar logado para curtir.");const t=await s.json();if(t&&t.item){f(t.item),N(t.item.likes||0);const r=await(await fetch("/api/session")).json().catch(()=>null);C(r&&r.user?(t.item.likedBy||[]).includes(r.user.username):!1)}}catch(s){console.error("like failed",s),alert("Erro ao curtir")}},J=async()=>{try{navigator.share?await navigator.share({title:a==null?void 0:a.title,text:`Confira: ${a==null?void 0:a.title}`,url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),alert("Link copiado para a Ã¡rea de transferÃªncia!")),fetch(`/api/news/${c}/share`,{method:"POST"}).then(s=>s.json()).then(s=>{s&&s.item&&j(s.item.shares||v+1)}).catch(()=>j(s=>s+1))}catch(s){console.error(s)}};if(O)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsxs("main",{className:"container py-8",children:[e.jsx(o,{className:"h-12 w-32 mb-6"}),e.jsx(o,{className:"h-64 w-full mb-6 rounded-lg"}),e.jsx(o,{className:"h-8 w-full mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{className:"h-4 w-full"}),e.jsx(o,{className:"h-4 w-full"}),e.jsx(o,{className:"h-4 w-3/4"})]})]}),e.jsx(w,{})]});if(!a)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsx("main",{className:"container py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“°"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"NotÃ­cia nÃ£o encontrada"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"A notÃ­cia que vocÃª procura nÃ£o existe ou foi removida."}),e.jsxs(d,{onClick:()=>y("/news"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Voltar para NotÃ­cias"]})]})}),e.jsx(w,{})]});const K=Math.ceil((((E=a.content||a.summary)==null?void 0:E.split(" ").length)||100)/200);return e.jsxs("div",{className:"min-h-screen bg-background relative",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-primary z-50",style:{width:`${I}%`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"}),e.jsx(b,{}),e.jsxs("main",{className:"container py-8 relative z-10",children:[e.jsxs(d,{variant:"ghost",onClick:()=>y("/news"),className:"mb-6",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Voltar para NotÃ­cias"]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(x,{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted/20",children:[a.image?e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(V,{className:"h-16 w-16 text-primary/40"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs(X,{className:`border ${F[a.category]||F.Campeonato}`,children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),a.category]})}),e.jsxs("div",{className:"absolute top-4 right-4 bg-black/40 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(H,{className:"h-4 w-4"}),A," views"]})]}),e.jsxs(h,{className:"p-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-muted-foreground mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),new Date(a.date||a.createdAt||"").toLocaleDateString("pt-BR",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"~",K," min de leitura"]})]}),e.jsx("p",{className:"text-lg text-muted-foreground italic border-l-4 border-primary pl-4 mb-8",children:a.summary}),e.jsx(p,{className:"my-8"}),e.jsx("div",{className:"space-y-4 text-muted-foreground leading-relaxed mb-8",children:(a.content||a.summary).split(`

`).map((s,t)=>e.jsx("p",{className:"text-base",children:s},t))}),e.jsx(p,{className:"my-8"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-4",children:[e.jsxs(d,{variant:g?"default":"outline",size:"sm",onClick:G,className:"gap-2",children:[e.jsx(R,{className:`h-4 w-4 ${g?"fill-current":""}`}),g?"Curtido":"Curtir"," (",S,")"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:J,className:"gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Compartilhar (",v,")"]})]})]})]}),T.length>0&&e.jsxs(x,{className:"glass-card",children:[e.jsx(P,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Leia TambÃ©m"]})}),e.jsx(h,{className:"space-y-4",children:T.map(s=>e.jsxs($,{to:`/news/${s.id}`,className:"block p-3 rounded-lg hover:bg-muted/50 transition-colors group border border-transparent hover:border-primary/30",children:[e.jsx("h4",{className:"font-semibold group-hover:text-primary transition-colors line-clamp-2 mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date||s.createdAt||"").toLocaleDateString("pt-BR")})]},s.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"glass-card",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(Z,{className:"h-16 w-16",children:[e.jsx(_,{src:a.authorAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.author}`}),e.jsx(ee,{children:(a.author||"A").substring(0,2).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.author||"BSR News"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Autor"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Profissional de sim racing com experiÃªncia em jornalismo."})]})}),e.jsx(x,{className:"glass-card",children:e.jsxs(h,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(H,{className:"h-4 w-4"}),"VisualizaÃ§Ãµes"]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:A})]}),e.jsx(p,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(R,{className:"h-4 w-4"}),"Curtidas"]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:S})]}),e.jsx(p,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),"Compartilhamentos"]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:v})]})]})}),e.jsxs(x,{className:"glass-card",children:[e.jsx(P,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-orange-500"}),"Em TendÃªncia"]})}),e.jsx(h,{className:"space-y-3",children:Y.map((s,t)=>e.jsx($,{to:`/news/${s.id}`,className:"block p-3 rounded-lg hover:bg-muted/50 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"text-sm font-bold text-primary w-6 flex-shrink-0",children:["#",t+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm group-hover:text-primary transition-colors line-clamp-2",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.views||0," visualizaÃ§Ãµes"]})]})]})},s.id))})]}),e.jsxs(d,{variant:"outline",className:"w-full",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Voltar ao Topo"]})]})]})]}),e.jsx(w,{})]})};export{be as default};
